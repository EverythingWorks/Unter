
{% extends 'base_logged.html' %}

{% block content %}

<h3>{{ user.username }} rides history</h3>
<br>
{% if recent_ride_status == 'SET_BY_PASSENGER' or recent_ride_status == 'ACCEPTED' %}
<h4>Current ride:</h4>

<div class="container">

    <div class="row" style="width: 60vw">
        <div class="col">
            From:
        </div>
        <div class="col">
            To:
        </div>
        <div class="col-2">
            Date:
        </div>
        <div class="col-3">
            Status:
        </div> 
    </div>
    <div class = "list">
        {% for ride in rides_history %}
         {% if ride.status == 'SET_BY_PASSENGER' or ride.status == 'ACCEPTED' %}
            <div class="row">
               <div class="col">
                   ( {{ ride.pickup_longitude }} , {{ ride.pickup_latitude }} )
               </div>
               <div class="col">
                   ({{ride.dropoff_longitude}} , {{ride.dropoff_latitude }})
               </div>
               <div class="col-2">
                   {{ride.pickup_datetime}}
               </div>
               <div class="col-3">
                   {{ride.get_status_display}}
               </div>            
             </div>
             {% endif %}
       {% endfor %}    
    </div>
</div>

<form method="GET" class="ride-form">
    {% csrf_token %}
    <center>
        <table style = "border: none">
        <tr style = "height: auto">
            <th>
                <center><button type = "submit" value="cancel" name="cancel">CANCEL RIDE</button></center>
            </th>
            <th>
                <center><button type = "submit" value="finish" name="finish">FINISH RIDE</button></center>
            </th>
        </tr>
         </table>
    </center>
</form>

<br>
{% endif %}

{% if rides_history %}
<h4>History:</h4>

<div class="container">

    <div class="row" style="width: 60vw">
        <div class="col">
            From:
        </div>
        <div class="col">
            To:
        </div>
        <div class="col-2">
            Date:
        </div>
        <div class="col-3">
            Status:
        </div>
    </div>
    <div class = "list">
    {% for ride in rides_history %}
         <div class="row">
            <div class="col">
                ( {{ ride.pickup_longitude }} , {{ ride.pickup_latitude }} )
            </div>
            <div class="col">
                ({{ride.dropoff_longitude}} , {{ride.dropoff_latitude }})
            </div>
            <div class="col-2">
                {{ride.pickup_datetime}}
            </div>
            <div class="col-3">
                {{ride.get_status_display}}
            </div>            
          </div>
    {% endfor %}
    </div>
</div>

{% else %}
<div class="container">
    <h4 style="padding-left: 0">You don't have any rides yet.</h4>
    <h2 style="text-align: left;">Plan yor first ride <a href="{% url 'home' %}">here</a>.</h2>

</div>
{% endif %}

{% endblock %}
